<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Cost Calculator | Online Task and Project Cost Calculator</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <title>Task Cost Calculator | Online Task and Project Cost Calculator</title>

  <!-- Meta Description -->
  <meta name="description" content="Task Cost Calculator is a convenient online tool for calculating the cost of tasks and projects. Add tasks, account for time and discounts, and generate professional PDF reports. Perfect for freelancers, agencies, and small businesses.">

  <!-- Meta Keywords -->
  <meta name="keywords" content="task calculator, cost calculator, project cost, task management tool, PDF report generator, online task calculator, freelancer tool, project management, task pricing, calculate task cost">

  <!-- Open Graph Meta Tags (for social media) -->
  <meta property="og:title" content="Task Cost Calculator | Online Task and Project Cost Calculator">
  <meta property="og:description" content="Task Cost Calculator is a convenient tool for calculating task and project costs. Add tasks, apply discounts, and generate professional PDF reports.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://taskcostcalculator.cloud/">
  <meta property="og:image" content="http://taskcostcalculator.cloud/assets/images/preview.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Task Cost Calculator | Online Task and Project Cost Calculator">
  <meta name="twitter:description" content="A convenient online tool for calculating task costs. Quickly generate PDF reports and manage project pricing.">
  <meta name="twitter:image" content="http://taskcostcalculator.cloud/assets/images/preview.jpg">

  <!-- Structured Data (JSON-LD Schema) -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Task Cost Calculator",
      "url": "http://taskcostcalculator.cloud/",
      "description": "A convenient online calculator for determining the cost of tasks and projects, with PDF report generation.",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "image": "http://taskcostcalculator.cloud/assets/images/preview.jpg",
      "author": {
        "@type": "Person",
        "name": "Task Cost Team"
      },
      "datePublished": "2024-11-06"
    }
  </script>

  <!-- Favicon -->
  <link rel="icon" href="http://taskcostcalculator.cloud/assets/images/favicon.ico" type="image/x-icon">
</head>
<body class="container my-4">

<h1 class="text-center mb-4">Task Cost Calculator</h1>

<!-- Client Information Form -->
<h2>Client Information</h2>
<form id="clientForm" class="mb-4">
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="clientName">Client Name</label>
      <input type="text" class="form-control" id="clientName" placeholder="Enter client name">
    </div>
    <div class="form-group col-md-4">
      <label for="clientEmail">Client Email</label>
      <input type="email" class="form-control" id="clientEmail" placeholder="Enter client email">
    </div>
    <div class="form-group col-md-4">
      <label for="clientPhone">Client Phone</label>
      <input type="tel" class="form-control" id="clientPhone" placeholder="Enter client phone">
    </div>
  </div>
  <div class="form-group">
    <label for="clientAddress">Client Address</label>
    <input type="text" class="form-control" id="clientAddress" placeholder="Enter client address">
  </div>
</form>

<!-- Rate and Discount Section -->
<div class="row mb-3">
  <div class="col-md-6">
    <label for="hourlyRate">Hourly Rate ($):</label>
    <input type="number" id="hourlyRate" class="form-control" placeholder="Enter hourly rate">
  </div>
  <div class="col-md-6">
    <label for="globalDiscount">Global Discount (%):</label>
    <input type="number" id="globalDiscount" class="form-control" placeholder="Enter global discount">
  </div>
</div>

<!-- Task Table -->
<h2 class="mt-4">Tasks</h2>
<table class="table table-bordered table-striped" id="taskTable">
  <thead class="thead-dark">
    <tr>
      <th>Task Description</th>
      <th>Time (hours:minutes)</th>
      <th>Hourly Rate</th>
      <th>Discount (%)</th>
      <th>Cost ($)</th>
      <th>Free Task</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<!-- Buttons for Actions -->
<div class="text-right mb-3">
  <button class="btn btn-primary" onclick="addTask()">Add Task</button>
</div>

<div class="text-center mb-4">
  <button class="btn btn-success" onclick="calculate()">Calculate</button>
  <button class="btn btn-info" onclick="savePDF()">Save as PDF</button>
  <button class="btn btn-warning" onclick="saveToLocalStorage()">Save to Local Storage</button>
  <button class="btn btn-secondary" onclick="loadFromLocalStorage()">Load from Local Storage</button>
</div>

<!-- Summary Section -->
<div class="summary bg-light p-3">
    <h4>Summary</h4>
    <p>Total Time for Paid Tasks: <span id="totalTimePaid">0</span> hours</p>
    <p>Total Time for Free Tasks: <span id="totalTimeFree">0</span> hours</p>
    <p>Total Cost (before discounts): $<span id="totalGrossCost">0.00</span></p>
    <p>Total Discount Given: $<span id="totalDiscount">0.00</span></p>
    <p>Total Payable Amount: $<span id="totalCost">0.00</span></p>


  </div>
  

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  let tasks = [];

  function addTask(existingTask = null) {
    const taskTable = document.getElementById('taskTable').getElementsByTagName('tbody')[0];
    const row = taskTable.insertRow();
    const task = existingTask || {
      description: '',
      timeHours: 0,
      timeMinutes: 0,
      hourlyRate: 0,
      discount: 0,
      free: false
    };
    tasks.push(task);

    row.innerHTML = `
      <td><input type="text" class="form-control" value="${task.description}" oninput="updateTask(${tasks.length - 1}, 'description', this.value)" placeholder="Task description"></td>
      <td>
        <div class="form-inline">
          <input type="number" class="form-control mr-2" style="width: 60px;" value="${task.timeHours}" min="0" oninput="validateHours(this, ${tasks.length - 1})" placeholder="Hrs">
          <span>:</span>
          <input type="number" class="form-control ml-2" style="width: 60px;" value="${task.timeMinutes}" min="0" max="60" oninput="validateMinutes(this, ${tasks.length - 1})" placeholder="Min">
        </div>
      </td>
      <td><input type="number" class="form-control" value="${task.hourlyRate}" oninput="updateTask(${tasks.length - 1}, 'hourlyRate', parseFloat(this.value))" placeholder="Hourly rate"></td>
      <td><input type="number" class="form-control" value="${task.discount}" oninput="updateTask(${tasks.length - 1}, 'discount', parseFloat(this.value))" placeholder="Discount"></td>
      <td class="cost">$0.00</td>
      <td class="text-center"><input type="checkbox" ${task.free ? 'checked' : ''} onchange="updateTask(${tasks.length - 1}, 'free', this.checked)"></td>
      <td class="text-center">
        <button class="btn btn-danger btn-sm" onclick="deleteTask(this)">Delete</button>
        <button class="btn btn-secondary btn-sm" onclick="duplicateTask(${tasks.length - 1})">Duplicate</button>
      </td>
    `;
  }

  function validateHours(input, index) {
    const value = parseInt(input.value);
    if (value < 0) {
      input.value = 0;
    }
    updateTask(index, 'timeHours', parseFloat(input.value));
  }

  function validateMinutes(input, index) {
    const value = parseInt(input.value);
    if (value < 0) {
      input.value = 0;
    } else if (value > 60) {
      input.value = 60;
    }
    updateTask(index, 'timeMinutes', parseFloat(input.value));
  }

  function duplicateTask(index) {
    const taskToDuplicate = tasks[index];
    addTask({ ...taskToDuplicate });
  }

  function updateTask(index, field, value) {
    tasks[index][field] = value;
    calculate();
  }

  function deleteTask(button) {
    const rowIndex = button.parentNode.parentNode.rowIndex - 1;
    tasks.splice(rowIndex, 1);
    document.getElementById('taskTable').deleteRow(rowIndex + 1);
    calculate();
  }

  function calculate() {
  const globalDiscount = parseFloat(document.getElementById('globalDiscount').value) || 0;
  let totalPaidTime = 0, totalFreeTime = 0, totalCost = 0, totalDiscountValue = 0, totalGrossCost = 0;

  tasks.forEach((task, index) => {
    const costCell = document.querySelector(`#taskTable tbody tr:nth-child(${index + 1}) .cost`);
    const timeInHours = (parseFloat(task.timeHours) || 0) + ((parseFloat(task.timeMinutes) || 0) / 60);
    const rate = parseFloat(task.hourlyRate) || parseFloat(document.getElementById('hourlyRate').value) || 0;

    let discount = parseFloat(task.discount);
    if (isNaN(discount)) {
      discount = globalDiscount;
    }

    if (task.free) {
      totalFreeTime += timeInHours;
      costCell.textContent = '$0.00';
    } else {
      const grossCost = timeInHours * rate; // Стоимость без скидки
      const taskCost = grossCost * (1 - discount / 100); // Итоговая стоимость со скидкой
      const discountValue = grossCost - taskCost; // Сумма скидки

      totalGrossCost += grossCost; // Общая сумма без скидки
      totalDiscountValue += discountValue; // Общая сумма скидки
      totalPaidTime += timeInHours;
      totalCost += taskCost;

      costCell.textContent = `$${taskCost.toFixed(2)}`;
    }
  });

  document.getElementById('totalTimePaid').textContent = totalPaidTime.toFixed(2);
  document.getElementById('totalTimeFree').textContent = totalFreeTime.toFixed(2);
  document.getElementById('totalCost').textContent = totalCost.toFixed(2);
  document.getElementById('totalGrossCost').textContent = totalGrossCost.toFixed(2);
  document.getElementById('totalDiscount').textContent = totalDiscountValue.toFixed(2);
}




  function saveToLocalStorage() {
    const clientInfo = {
      clientName: document.getElementById('clientName').value,
      clientEmail: document.getElementById('clientEmail').value,
      clientPhone: document.getElementById('clientPhone').value,
      clientAddress: document.getElementById('clientAddress').value,
      hourlyRate: document.getElementById('hourlyRate').value,
      globalDiscount: document.getElementById('globalDiscount').value,
      tasks: tasks
    };
    localStorage.setItem('taskData', JSON.stringify(clientInfo));
    alert('Data saved to local storage!');
  }

  function loadFromLocalStorage() {
    const data = JSON.parse(localStorage.getItem('taskData'));
    if (data) {
      document.getElementById('clientName').value = data.clientName;
      document.getElementById('clientEmail').value = data.clientEmail;
      document.getElementById('clientPhone').value = data.clientPhone;
      document.getElementById('clientAddress').value = data.clientAddress;
      document.getElementById('hourlyRate').value = data.hourlyRate;
      document.getElementById('globalDiscount').value = data.globalDiscount;

      tasks = [];
      document.getElementById('taskTable').getElementsByTagName('tbody')[0].innerHTML = '';
      data.tasks.forEach(task => addTask(task));
      calculate();
      alert('Data loaded from local storage!');
    } else {
      alert('No data found in local storage!');
    }
  }

  function savePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  const clientName = document.getElementById('clientName').value || 'N/A';
  const clientPhone = document.getElementById('clientPhone').value || 'N/A';
  const clientEmail = document.getElementById('clientEmail').value || 'N/A';
  const clientAddress = document.getElementById('clientAddress').value || 'N/A';

  const totalTimePaid = document.getElementById('totalTimePaid').textContent;
  const totalTimeFree = document.getElementById('totalTimeFree').textContent;
  const totalCost = parseFloat(document.getElementById('totalCost').textContent);
  const totalGrossCost = parseFloat(document.getElementById('totalGrossCost').textContent);
  const totalDiscount = parseFloat(document.getElementById('totalDiscount').textContent);
  const discountPercentage = ((totalDiscount / totalGrossCost) * 100).toFixed(2);

  // Заголовок
  doc.setFontSize(18);
  doc.setTextColor(40);
  doc.text(`Task Cost Summary for ${clientName}`, 10, 10);

  doc.setFontSize(12);
  doc.setTextColor(60);
  doc.text(`Phone: ${clientPhone}`, 10, 20);
  doc.text(`Email: ${clientEmail}`, 10, 30);
  doc.text(`Address: ${clientAddress}`, 10, 40);

  // Summary Block
  doc.setFontSize(14);
  doc.setTextColor(40);
  doc.text(`Summary:`, 10, 50);

  // Выводим строки в нужном порядке
  const summaryData = [
    `Total Cost (before discounts): $${totalGrossCost.toFixed(2)}`,
    `Total Discount Given: $${totalDiscount.toFixed(2)} (${discountPercentage}%)`
  ];

  // Настраиваем шрифт и цвет для выделения скидки
  doc.setFontSize(12);
  doc.setTextColor(80);
  doc.text(summaryData[0], 10, 60);

  doc.setTextColor(255, 0, 0); // Красный цвет для суммы скидки
  doc.text(summaryData[1], 10, 70);

  // Сумма к оплате
  doc.setFontSize(14);
  doc.setTextColor(0, 0, 0);
  doc.setFont('helvetica', 'bold'); // Полужирный шрифт
  doc.text(`Total Payable Amount: $${totalCost.toFixed(2)}`, 10, 85);

  // Task Table
  const tableData = tasks.map(task => {
    const globalRate = parseFloat(document.getElementById('hourlyRate').value) || 0;
    const globalDiscount = parseFloat(document.getElementById('globalDiscount').value) || 0;

    const timeInHours = (parseFloat(task.timeHours) || 0) + ((parseFloat(task.timeMinutes) || 0) / 60);
    const rate = task.hourlyRate || globalRate;
    const discount = task.discount || globalDiscount;
    const taskCost = task.free ? 0 : timeInHours * rate * (1 - discount / 100);
    const freeTask = task.free ? 'Yes' : 'No';

    return [
      task.description || 'N/A',
      `${task.timeHours || 0}:${task.timeMinutes || 0}`,
      `$${rate.toFixed(2)}`,
      `${discount}%`,
      `$${taskCost.toFixed(2)}`,
      freeTask
    ];
  });

  doc.autoTable({
    startY: 100,
    head: [['Task Description', 'Time (hours:minutes)', 'Hourly Rate ($)', 'Discount (%)', 'Cost ($)', 'Free Task']],
    body: tableData,
    theme: 'grid',
    styles: {
      fontSize: 10,
      textColor: 20,
      lineColor: [200, 200, 200],
      lineWidth: 0.5
    },
    headStyles: {
      fillColor: [41, 128, 185],
      textColor: [255, 255, 255],
      fontSize: 12
    },
    bodyStyles: {
      fillColor: [245, 245, 245]
    },
    alternateRowStyles: {
      fillColor: [255, 255, 255]
    },
    columnStyles: {
      4: { halign: 'right' },
      5: { halign: 'center' }
    }
  });

  doc.save('Task_Cost_Summary.pdf');
}



</script>

</body>
</html>
